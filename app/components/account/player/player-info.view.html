<div class="player-details clearfix">
  <div class="pd-left nopadding">
    <div class="profile-pic">
      <img data-ng-if="!player.playerObj.profileURL" src="assets/images/fallback-img.png"
           alt="player" width="100%" height="100%"/>
      <img data-ng-if="player.playerObj.profileURL"
           data-ng-src="{{player.playerObj.profileURL}}"
           class="img-rectangle img-border-radius" alt="player" width="100%" height="100%">
      <a ui-sref="account.editPlayer({ id: player.playerObj.id })">
        <i class="glyphicon glyphicon-edit"></i> <span data-translate="player.edit_player">Edit Player</span> </a>
    </div>
  </div>
  <div class="pd-right">
    <h3>{{player.playerObj.firstName}} {{player.playerObj.lastName}}</h3>

    <p>
      <img src="assets/images/badge1.png" width="12" class="non-retina" />
      <img src="assets/images/badge1@2x.png" width="12" class="retina-display" />
      <span data-ng-if="!player.highlights.earnedBadges" data-translate="player.badges.nobadge_earned"> No badges earned so far. </span>
      <span data-ng-if="player.highlights.earnedBadges"> <strong>{{player.highlights.earnedBadges}} </strong><span
        data-translate="player.badges.nobadge_earned_days"> badges earned in the past 7 days.</span> </span>
    </p>

    <p>
      <img src="assets/images/badge2.png" width="12" class="non-retina" />
      <img src="assets/images/badge2@2x.png" width="12" class="retina-display" />
      <span data-ng-if="!player.highlights.totalPlayedTime" data-translate="player.badges.no_spendtime"> You haven't spent anytime on games.</span>
      <span data-ng-if="player.highlights.totalPlayedTime"> <strong>{{player.highlights.totalPlayedTime}}</strong> <span
        data-translate="player.badges.last_time_played">time played in Square Panda for past 7 days.</span></span>
    </p>

    <p>
      <img src="assets/images/badge2.png" width="12" class="non-retina" />
      <img src="assets/images/badge2@2x.png" width="12" class="retina-display" />
      <span data-ng-if="player.highlights.correctWord"> <span data-translate="player.badges.recent_word">Most recent word </span><strong>"{{player.highlights.correctWord}}"</strong> <span
        data-translate="player.badges.mark_correct">marked as Correct.</span></span>
      <span data-ng-if="!player.highlights.correctWord" data-translate="player.badges.noword_correct"> No words are marked as correct so far.</span>
    </p>

    <p>
      <img src="assets/images/badge2.png" width="12" class="non-retina" />
      <img src="assets/images/badge2@2x.png" width="12" class="retina-display" />
      <span data-ng-if="!player.highlights.favourites.word || !player.highlights.favourites.count"
            data-translate="player.badges.no_fav_word"> No favorite word </span>
      <span data-ng-if="player.highlights.favourites.word && player.highlights.favourites.count"><span
        data-translate="player.badges.maybe_fav_word"> Maybe "Favourite Word" too?</span>  ( {{player.highlights.favourites.word}}<span
        data-translate="player.badges.spelling">spelled</span>   {{player.highlights.favourites.word}} {{player.highlights.favourites.count}} <span
        data-translate="player.badges.times">times</span>)</span>
    </p>


  </div>
</div>

<div class="player-tabs">
  <uib-tabset active="activeJustified">
    <uib-tab index="0" heading="Big Badges">
      <div class="badges-container clearfix">
        <div resize></div>

        <div class="badges-row clearfix"
             data-ng-repeat="reptable in player.splitBadgesData"
             data-ng-init="count = $index ">

          <div class="col-md-3 col-sm-6 badge-columns"
               data-ng-repeat-start="badge in player.bigBadgesData(count)"
               data-ng-click="player.showGraph(count, $index)">

            <data-badge-item item-data="badge"
                             display-index="player.displayChartIndex"
                             index="$index">
            </data-badge-item>
            <div class="center-align">
              <div class="bb-arrow"
                   data-ng-if="player.clicked && (player.showRow === count) && (player.showColumn === $index)"
                   ng-style="{'border-bottom-color': player.bigbadgedetails.colorCode}">
              </div>
            </div>

          </div>

          <div class="bb-col-{{$index}}"
               ng-class="{'bb-2side': (windowWidth >= 768) && (windowWidth <= 990) && (player.showColumn === 1 || player.showColumn === 0), 'bb-4side': (windowWidth >= 768) && (windowWidth <= 990) && (player.showColumn === 3 || player.showColumn === 2)}"
               data-ng-repeat-end=""
               data-ng-if="(player.clicked && (player.showRow === count) && (windowWidth >= 768)) || (player.clicked && (windowWidth <= 768) && (player.showRow === count) && (player.showColumn === $index))">
            <div class="bigbadge-description clearfix">
              <div class="bigbadge-description-empty-div"></div>
              <div class="bigbadge-description-text clearfix"
                   ng-style="{'background-color': player.bigbadgedetails.colorCode}">
                <p>{{player.bigbadgedetails.description}} </p>
                <span class="bigbadge-buttons " data-ng-repeat="word in player.bigbadgedetails.tabwords">{{word}}</span>
              </div>
              <div class="chart-container">
                  <div class="chart-overlay" data-ng-show="player.bigbadgedetails.percentage === 0">
                  <span>Please start the milestone to view your child's performance</span>
                  </div>
              <div class="bigbadge-graph-buttons ">
                <a class="btn bigbadge-graph-button-style"
                        data-ng-class="{'active': (player.chartTabType==='day' && player.bigbadgedetails.percentage !== 0)}"
                        data-translate="player.badges.this_week" data-ng-click="player.onGetChartData('day')">
                  This Week
                </a>
                <a class="btn bigbadge-graph-button-style"
                        data-ng-class="{'active': player.chartTabType==='week'}"
                        data-translate="player.badges.30days" data-ng-click="player.onGetChartData('week')">
                  30 Days
                </a>
                <a class="btn bigbadge-graph-button-style"
                        data-ng-class="{'active': player.chartTabType==='month'}"
                        data-translate="player.badges.1year" data-ng-click="player.onGetChartData('month')">
                  1 Year
                </a>
                <a class="btn bigbadge-graph-button-style"
                        data-ng-class="{'active': player.chartTabType==='year'}"
                        data-translate="player.badges.all_time" data-ng-click="player.onGetChartData('year')">
                  All Time
                </a>
              </div>
              <highchart id="chartContainer" config="player.highchartsNG"></highchart>
            </div>
              </div>
          </div>

        </div>
      </div>
    </uib-tab>
    <uib-tab index="1" heading="Mini Badges">
      <div class="mini-badges-container clearfix">
        <div class="row minibadges-row">
          <div class="col-md-3" ng-repeat="minibadge in player.miniBadges">
            <div class="mini-badge-item">
              <div class="mb-con ">
                <div class="mb-icon-con  center-align">
                  <div class="mb-icon">
                  <div class="mb-icon">
                    <img data-ng-if="!minibadge.assetURL" src="assets/images/no-badge.png" alt="minibadge"  width="110" />
                    <img data-ng-if="minibadge.assetURL && minibadge.status === 'Disabled'"
                         data-ng-src="{{minibadge.disabledassetURL}}"  width="110"  />
                    <img data-ng-if="minibadge.assetURL && minibadge.status === 'Active'"
                         data-ng-src="{{minibadge.assetURL}}"  width="110"  />
                  </div>
                </div>
              </div>
              <div class="mb-des">
                <h4 class="center-align">{{minibadge.badgeName}}</h4>
                <div class="center-align minibadge-description"> {{minibadge.description}}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
        </div>
    </uib-tab>
    <uib-tab index="2" heading="Words" data-ng-click="player.getWordsClickHandler()">
      <div class="badges-container clearfix">
        <a href="" class="player-export-btn" data-ng-if=" player.getWordsExportData().length > 0"
           ng-click="$event.stopPropagation();$event.preventDefault();"
           ng-csv="player.getWordsExportData()"
           filename="words.csv"
           csv-header="player.getCSVHeader()"><i class="fa fa-download"></i><span
          data-translate="curriculum.export_csv">Export CSV</span></a>

        <div class="table-responsive player-words-table">
          <table class="table table-striped table-hover borderless ">
            <thead>
            <tr>
              <th ng-repeat="key in player.getKeysOfCollection(player.wordsHeaders)"
                  ng-click="player.predicate = key; player.reverse=!player.reverse;">
                {{player.wordsHeaders[key]}}
                <span class="fa fa-sort columnSortIcons" ng-if="key !== player.predicate"></span>
                <span class="fa fa-sort-down columnSortIcons"
                      ng-if="!(player.reverse) && key === player.predicate"></span>
                <span class="fa fa-sort-up columnSortIcons"
                      ng-if="player.reverse && key === player.predicate"></span>
              </th>
            </tr>
            </thead>
            <tbody>
            <tr data-ng-repeat="word in player.wordsData | orderBy:player.predicate:player.reverse">
              <td class="player-words text-ellipsis word-text">{{ word.word}}</td>
              <td class="word-icons">{{ word.activity.length}}</td>
              <td data-ng-if="word.gamescore > 0" class="word-check"><img src="assets/images/tick.png" width="15"/>
              </td>
              <td data-ng-if="word.gamescore == 0" class="word-check">
                <img src="assets/images/wrong.png" width="15" />
              </td>
              <td class="word-date">{{ word.endtime*1000 | date:"MM/dd/yyyy h:mma"}}</td>
            </tr>
            <tr data-ng-if="player.wordsData.length === 0">
              <td colspan="5" data-translate="player.badges.nodata" class="no-data"> No Data</td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </uib-tab>
  </uib-tabset>
</div>
