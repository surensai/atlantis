<div class="login-bg"></div>
<div class="alert alert-success" data-ng-if="globals.flash && globals.flash.type == 'success'">
  {{globals.flash.message}}
</div>
<div class="alert alert-danger" data-ng-if="globals.flash && globals.flash.type !== 'success'">
  {{globals.flash.message}}
</div>
<div class="content login-wrapper" cg-busy="{promise:changePassword.loadPromise,message:'Submitting Your Data'}">

  <div class="col-lg-4"></div>

  <div class="col-lg-4">

    <form name="userForm" class="login-form" ng-submit="changePassword.submitForm(userForm)" novalidate>
      <h2 class="form-signin-heading" data-translate="nav.change_password.header">Change Password</h2>

      <div class="form-group"
           data-ng-class="{ 'has-error' : (changePassword.submitted && !changePassword.model.oldPassword) || (userForm.oldPassword.$invalid && !userForm.oldPassword.$pristine) }">
        <input type="password" name="oldPassword" data-ng-model="changePassword.model.oldPassword"
               class="form-control" placeholder="{{ 'user.change_password.old_password' | translate }}" required/>

        <p
          ng-show="(changePassword.submitted && !changePassword.model.oldPassword) || (userForm.oldPassword.$invalid && !userForm.oldPassword.$pristine)"
          class="help-block" data-translate="user.validationMessages.password_require">Password is required</p>
      </div>

      <div class="form-group"
           data-ng-class="{ 'has-error' : (changePassword.submitted && !changePassword.model.password) || (userForm.password.$invalid && !userForm.password.$pristine) }">
        <input type="password" name="password" data-ng-model="changePassword.model.password" ng-minlength="8"
               class="form-control" placeholder="{{ 'user.change_password.new_password' | translate }}" required/>

        <p
          ng-show="(changePassword.submitted && !changePassword.model.password) || (userForm.password.$invalid && !userForm.password.$pristine)"
          class="help-block" data-translate="user.validationMessages.password_require">Password is required</p>
      </div>

      <div class="form-group"
           data-ng-class="{ 'has-error' : (changePassword.submitted && !changePassword.model.confirmPassword) || (userForm.confirmPassword.$invalid && !userForm.confirmPassword.$pristine) || (changePassword.model.password !== changePassword.model.confirmPassword) }">
        <input type="password" name="confirmPassword" data-ng-model="changePassword.model.confirmPassword"
               placeholder="{{ 'user.register.confirm_password' | translate }}" class="form-control" required>

        <p
          ng-show="changePassword.model.confirmPassword && (changePassword.model.password !== changePassword.model.confirmPassword)"
          class="help-block" data-translate="user.validationMessages.password_mismatch">Password mismatch.</p>

        <p ng-show="(changePassword.submitted && !changePassword.model.confirmPassword)" class="help-block"
           data-translate="user.validationMessages.cpassword_require">Password mismatch.</p>
      </div>

      <button type="submit" class="btn btn-large btn-block btn-primary" data-translate="common.buttons.submit">Submit
      </button>
    </form>

  </div>
  <div class="col-lg-4"></div>
</div>
</div>
